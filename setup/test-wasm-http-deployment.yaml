apiVersion: v1
kind: Pod
metadata:
  name: http-server
  namespace: default
  annotations:
    module.wasm.image/variant: compat-smart
spec:
  restartPolicy: Always
  runtimeClassName: crun
  containers:
    - name: http-server
      image: wasmedge/example-wasi-http:latest
      command: ["/http_server.wasm"]
      ports:
        - containerPort: 1234
          protocol: TCP
      livenessProbe:
        tcpSocket:
          port: 1234
        initialDelaySeconds: 3
        periodSeconds: 30
